{"version":3,"file":"index.esm.js","sources":["../src/useNhostClient.ts","../src/client.ts","../src/useAuthInterpreter.ts","../src/useAccessToken.ts","../src/useAuthenticated.ts","../src/useAuthenticationStatus.ts","../src/helpers.ts","../src/useChangeEmail.ts","../src/useChangePassword.ts","../src/useConfigMfa.ts","../src/useDecodedAccessToken.ts","../src/useFileUpload.ts","../src/useHasuraClaims.ts","../src/useHasuraClaim.ts","../src/useMultipleFilesUpload.ts","../src/useProviderLink.ts","../src/useResetPassword.ts","../src/useSendVerificationEmail.ts","../src/useError.ts","../src/useSignInAnonymous.ts","../src/useSignInEmailPassword.ts","../src/useSignInEmailPasswordless.ts","../src/useSignInPAT.ts","../src/useSignInSmsPasswordless.ts","../src/useSignOut.ts","../src/useUserData.ts","../src/useSignUpEmailPassword.ts","../src/useUserAvatarUrl.ts","../src/useUserDefaultRole.ts","../src/useUserDisplayName.ts","../src/useUserEmail.ts","../src/useUserId.ts","../src/useUserIsAnonymous.ts","../src/useUserLocale.ts","../src/useUserRoles.ts","../src/useElevateSecurityKeyEmail.ts","../src/useSignUpEmailSecurityKey.ts","../src/useSignInEmailSecurityKey.ts","../src/useAddSecurityKey.ts","../src/useSignInEmailOTP.ts","../src/useSignInIdToken.ts","../src/useLinkIdToken.ts","../src/useSignInSecurityKey.ts"],"sourcesContent":["import { getCurrentInstance, inject } from 'vue'\n\nimport { NhostClient } from './client'\n\nexport const DefaultNhostClient = Symbol('default-nhost-client')\n\ntype NullableNhostClient = NhostClient | null\nlet currentNhostClient: NullableNhostClient\n\ninterface ResolveClient {\n  (): NullableNhostClient\n}\n\ninterface UseNhostClientReturn {\n  resolveNhostClient: ResolveClient\n  readonly nhost: NhostClient\n}\n\n/**\n * Use the composable `useNhostClient` to get the Nhost JavaScript client (https://docs.nhost.io/reference/javascript).\n *\n * @example\n * ```tsx\n * const { nhost } = useNhostClient()\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-nhost-client\n */\nexport function useNhostClient(): UseNhostClientReturn {\n  let resolveImpl: ResolveClient\n\n  // Save current client in current closure scope\n  const savedCurrentClient = currentNhostClient\n\n  if (!getCurrentInstance()) {\n    resolveImpl = () => savedCurrentClient\n  } else {\n    const providedNhostClient: NhostClient | null = inject(DefaultNhostClient, null)\n\n    resolveImpl = () => {\n      if (savedCurrentClient) {\n        return savedCurrentClient\n      } else {\n        return providedNhostClient\n      }\n    }\n  }\n\n  function resolveNhostClient() {\n    const client = resolveImpl()\n    if (!client) {\n      throw new Error(\n        `No Nhost client found. Use provideNhostClient() if you are outside of a component setup.`\n      )\n    }\n    return client\n  }\n\n  return {\n    resolveNhostClient,\n    get nhost() {\n      return resolveNhostClient()\n    }\n  }\n}\n","import {\n  NhostAuthConstructorParams,\n  NhostClient as VanillaClient,\n  removeParameterFromWindow,\n  ServiceUrls,\n  Subdomain\n} from '@nhost/nhost-js'\nimport { App, warn } from 'vue'\nimport { DefaultNhostClient } from './useNhostClient'\n\nexport type { ErrorPayload, NhostSession, Subdomain, User } from '@nhost/nhost-js'\n\nexport interface NhostVueClientConstructorParams\n  extends Partial<Subdomain>,\n    Partial<ServiceUrls>,\n    Omit<NhostAuthConstructorParams, 'url' | 'start' | 'client'> {}\n\nexport class NhostClient extends VanillaClient {\n  private autoSignIn: boolean\n  constructor(params: NhostVueClientConstructorParams) {\n    super({ ...params, start: true })\n    this.autoSignIn = params.autoSignIn ?? true\n  }\n\n  /**\n   * @internal\n   * This method transforms the NhostClient class into a Vue plugin\n   */\n  install(app: App) {\n    const autoSignIn = this.autoSignIn\n    app.provide(DefaultNhostClient, this)\n    // * Remove the refreshToken & type from the hash when using Vue Router\n    if (autoSignIn) {\n      const router = app.config.globalProperties.$router\n      if (!router) {\n        // * Vue-router is not set. Do nothing.\n        return\n      }\n      if (router.options.history.base) {\n        warn(\n          '[Nhost]: Vue-router is configured with a history Hash Mode. Refresh tokens will not be removed from the hash.'\n        )\n        return\n      }\n      router.afterEach(() => {\n        removeParameterFromWindow('refreshToken')\n        removeParameterFromWindow('type')\n      })\n    }\n  }\n}\n","import { AuthMachine } from '@nhost/nhost-js'\nimport { computed, Ref } from 'vue'\nimport { InterpreterFrom } from 'xstate'\nimport { useNhostClient } from './useNhostClient'\n\n/** @internal */\nexport const useAuthInterpreter = (): Ref<InterpreterFrom<AuthMachine>> => {\n  const { nhost } = useNhostClient()\n\n  return computed(() => {\n    const interpreter = nhost.auth.client.interpreter\n    if (!interpreter) throw Error('No interpreter')\n    return interpreter\n  })\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use `useAccessToken` to get the access token of the user.\n *\n * @example\n * ```ts\n * const accessToken = useAccessToken();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-access-token\n */\nexport const useAccessToken = (): Ref<string | null> => {\n  const service = useAuthInterpreter()\n  return useSelector(service.value, (state) => state.context.accessToken.value)\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use `useAuthenticated` to get the authentication status of the user.\n *\n * @example\n * ```ts\n * const isAuthenticated = useAuthenticated();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-access-token\n */\nexport const useAuthenticated = (): Ref<boolean> => {\n  const service = useAuthInterpreter()\n  return useSelector(service.value, (state) => state.matches({ authentication: 'signedIn' }))\n}\n","import { ErrorPayload } from '@nhost/nhost-js'\nimport { toRefs } from '@vueuse/core'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use `useAuthenticationStatus` to get the authentication status for the user.\n *\n * @example\n * ```tsx\n * const { isAuthenticated, isLoading } = useAuthenticationStatus();\n * ```\n */\nexport const useAuthenticationStatus = (): ToRefs<{\n  isAuthenticated: boolean\n  isLoading: boolean\n  error: ErrorPayload | null\n  isError: boolean\n  connectionAttempts: number\n}> => {\n  const service = useAuthInterpreter()\n  return toRefs(\n    useSelector(\n      service.value,\n      (state) => ({\n        isAuthenticated: state.matches({ authentication: 'signedIn' }),\n        isLoading: state.hasTag('loading'),\n        error: state.context.errors.authentication || null,\n        isError: state.matches({ authentication: { signedOut: 'failed' } }),\n        connectionAttempts: state.context.importTokenAttempts\n      }),\n      (a, b) =>\n        a.isAuthenticated === b.isAuthenticated &&\n        a.isLoading === b.isLoading &&\n        a.connectionAttempts === b.connectionAttempts\n    )\n  )\n}\n","import { Ref, unref } from 'vue'\n\nexport type RefOrValue<T> = T | Ref<T>\n\nexport type NestedRefOfValue<T> = RefOrValue<{\n  [key in keyof T]: T[key] extends RefOrValue<infer Type>\n    ? NestedRefOfValue<Type>\n    : T[key] extends RefOrValue<infer Type>\n    ? Type\n    : T[key] extends object\n    ? NestedRefOfValue<T[key]>\n    : T[key]\n}>\n\nexport const nestedUnref = <T>(input: NestedRefOfValue<T>): T => {\n  const result: NestedRefOfValue<T> = unref(input)\n\n  if (Array.isArray(result)) {\n    // If the result is an array, recursively process each element.\n    return result.map((value) => nestedUnref(value as NestedRefOfValue<unknown>)) as T\n  } else if (result && typeof result === 'object') {\n    // If the result is an object, recursively process its properties.\n    return Object.entries(result).reduce(\n      (aggr, [key, value]) => ({ ...aggr, [key]: nestedUnref(value as NestedRefOfValue<unknown>) }),\n      {} as T\n    )\n  } else {\n    // For non-object and non-array values, return the result as is.\n    return result\n  }\n}\n","import {\n  ChangeEmailHandlerResult,\n  ChangeEmailOptions,\n  changeEmailPromise,\n  ChangeEmailState,\n  createChangeEmailMachine\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface ChangeEmailComposableResult extends ToRefs<ChangeEmailState> {\n  /** Requests the email change. Returns a promise with the current context  */\n  changeEmail(email: RefOrValue<string>): Promise<ChangeEmailHandlerResult>\n}\n\n/**\n * Use the composable `useChangeEmail` to change email for the user.\n *\n * @example\n * ```tsx\n * const { changeEmail, isLoading, needsEmailVerification, isError, error } = useChangeEmail();\n *\n * watchEffect(() => {\n *   console.log(isLoading.value, needsEmailVerification.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await changeEmail('new@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-change-email\n */\nexport const useChangeEmail = (\n  options?: NestedRefOfValue<ChangeEmailOptions | undefined>\n): ChangeEmailComposableResult => {\n  const { nhost } = useNhostClient()\n\n  const service = useInterpret(createChangeEmailMachine(nhost.auth.client))\n  const isLoading = useSelector(service, (state) => state.matches('requesting'))\n\n  const error = useSelector(service, (state) => state.context.error)\n  const isError = useSelector(service, (state) => state.matches('idle.error'))\n  const needsEmailVerification = useSelector(service, (state) => state.matches('idle.success'))\n\n  const changeEmail = (email: string) =>\n    changeEmailPromise(service, unref(email), nestedUnref(options))\n\n  return { changeEmail, isLoading, error, isError, needsEmailVerification }\n}\n","import {\n  ChangePasswordHandlerResult,\n  changePasswordPromise,\n  ChangePasswordState,\n  createChangePasswordMachine\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface ChangePasswordComposableResult extends ToRefs<ChangePasswordState> {\n  changePassword(password: RefOrValue<string>): Promise<ChangePasswordHandlerResult>\n}\n\n/**\n * Use the composable `useChangePassword` to change password for the user.\n *\n * @example\n * ```tsx\n * const { changePassword, isLoading, isSuccess, isError, error } = useChangePassword();\n *\n * watchEffect(() => {\n *   console.log(isLoading.value, isSuccess.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await changePassword('my-new-password')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-change-password\n */\nexport const useChangePassword = (): ChangePasswordComposableResult => {\n  const { nhost } = useNhostClient()\n\n  const service = useInterpret(createChangePasswordMachine(nhost.auth.client))\n  const isLoading = useSelector(service, (state) => state.matches('requesting'))\n\n  const error = useSelector(service, (state) => state.context.error)\n  const isError = useSelector(service, (state) => state.matches('idle.error'))\n  const isSuccess = useSelector(service, (state) => state.matches('idle.success'))\n\n  const changePassword = (password: RefOrValue<string>) =>\n    changePasswordPromise(service, unref(password))\n\n  return { changePassword, isLoading, error, isError, isSuccess }\n}\n","import {\n  ActivateMfaHandlerResult,\n  activateMfaPromise,\n  ActivateMfaState,\n  createEnableMfaMachine,\n  GenerateQrCodeHandlerResult,\n  generateQrCodePromise,\n  GenerateQrCodeState\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface ConfigMfaComposableState\n  extends ToRefs<ActivateMfaState>,\n    ToRefs<GenerateQrCodeState> {\n  generateQrCode: () => Promise<GenerateQrCodeHandlerResult>\n  activateMfa: (code: string) => Promise<ActivateMfaHandlerResult>\n}\n\n/**\n * @internal\n * TODO documentation when available in Nhost Cloud - see changelog\n * TODO use a common reactive 'result' state - see for instance useChangeEmail\n * TODO use the promise action\n * @returns\n */\nexport const useConfigMfa = (): ConfigMfaComposableState => {\n  const { nhost } = useNhostClient()\n\n  const service = useInterpret(createEnableMfaMachine(nhost.auth.client))\n\n  const isError = useSelector(\n    service,\n    (state) => state.matches({ idle: 'error' }) || state.matches({ generated: { idle: 'error' } })\n  )\n  const isGenerating = useSelector(service, (state) => state.matches('generating'))\n  const isGenerated = useSelector(service, (state) => state.matches('generated'))\n  const isActivating = useSelector(service, (state) => state.matches({ generated: 'activating' }))\n  const isActivated = useSelector(service, (state) => state.matches({ generated: 'activated' }))\n  const error = useSelector(service, (state) => state.context.error)\n  const qrCodeDataUrl = useSelector(service, (state) => state.context.imageUrl || '')\n\n  const generateQrCode = () => generateQrCodePromise(service)\n\n  const activateMfa = (code: RefOrValue<string>) => activateMfaPromise(service, unref(code))\n\n  return {\n    generateQrCode,\n    isGenerating,\n    qrCodeDataUrl,\n    isGenerated,\n    activateMfa,\n    isActivating,\n    isActivated,\n    isError,\n    error\n  }\n}\n","import { JWTClaims } from '@nhost/nhost-js'\nimport { jwtDecode } from 'jwt-decode'\nimport { computed, ComputedRef } from 'vue'\nimport { useAccessToken } from './useAccessToken'\n\n/**\n * Use the composable `useDecodedAccessToken` to get the decoded access token of the user.\n *\n * @example\n * ```tsx\n * const decodedAccessToken = useDecodedAccessToken()\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-decoded-access-token\n */\nexport const useDecodedAccessToken = (): ComputedRef<JWTClaims | null> => {\n  const jwt = useAccessToken()\n  return computed(() => (jwt.value ? jwtDecode<JWTClaims>(jwt.value) : null))\n}\n","import {\n  createFileUploadMachine,\n  FileItemRef,\n  FileUploadMachine,\n  FileUploadState,\n  StorageUploadFileParams,\n  UploadFileHandlerResult,\n  uploadFilePromise\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { ToRefs } from 'vue'\nimport { InterpreterFrom } from 'xstate'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface FileUploadComposableResult extends ToRefs<FileUploadState> {\n  /**\n   * Add the file without uploading it.\n   */\n  add: (params: StorageUploadFileParams) => void\n\n  /**\n   * Upload the file given as a parameter, or that has been previously added.\n   */\n  upload: (params: Partial<StorageUploadFileParams>) => Promise<UploadFileHandlerResult>\n\n  /**\n   * Cancel the ongoing upload.\n   */\n  cancel: () => void\n\n  /**\n   * @internal - used by the MultipleFilesUpload component to notice the file should be removed from the list.\n   */\n  destroy: () => void\n}\n\nexport type { FileItemRef }\n\n/**\n * Use the composable `useFileUploadItem` to control the file upload of a file in a multiple file upload.\n *\n *\n * @example\n * ```vue\n * <!-- Parent component or page -->\n *\n * <script lang=\"ts\" setup>\n * const { files } = useMultipleFilesUpload()\n * <script lang=\"ts\" setup>\n *\n * <template>\n *  <div v-for=\"(file, index) of files\" :key=\"index\">\n *    <FileUploadItem :file=\"file\" />\n *  </div>\n * </template>\n *\n *\n * <!-- FileUploadItem component -->\n *\n * <script lang=\"ts\" setup>\n * import { FileItemRef } from '@nhost/nhost-js'\n * import { useFileUploadItem } from '@nhost/vue'\n *\n * const { file } = defineProps<{ file: FileItemRef }>()\n *\n * const { name, progress } = useFileUploadItem(file)\n * </script>\n *\n * <template>\n * <div>\n *  <span>{{ name }}</span>\n *    <v-progress-linear v-model=\"progress\">\n *      {{ progress }}\n *    </v-progress-linear>\n *  </div>\n * </template>\n *\n * ```\n */\nexport const useFileUploadItem = (\n  ref: FileItemRef | InterpreterFrom<FileUploadMachine>\n): FileUploadComposableResult => {\n  const { nhost } = useNhostClient()\n\n  const add = (params: StorageUploadFileParams) => {\n    ref.send({\n      type: 'ADD',\n      file: params.file,\n      bucketId: params.bucketId || bucketId.value\n    })\n  }\n\n  const upload = (params: Partial<StorageUploadFileParams>) =>\n    uploadFilePromise(\n      {\n        url: nhost.storage.url,\n        accessToken: nhost.auth.getAccessToken(),\n        adminSecret: nhost.adminSecret,\n        ...params\n      },\n      ref\n    )\n\n  const cancel = () => {\n    ref.send('CANCEL')\n  }\n\n  const destroy = () => {\n    ref.send('DESTROY')\n  }\n\n  const isUploading = useSelector(ref, (state) => state.matches('uploading'))\n  const isUploaded = useSelector(ref, (state) => state.matches('uploaded'))\n  const isError = useSelector(ref, (state) => state.matches('error'))\n  const error = useSelector(ref, (state) => state.context.error || null)\n  const progress = useSelector(ref, (state) => state.context.progress)\n  const id = useSelector(ref, (state) => state.context.id)\n  const bucketId = useSelector(ref, (state) => state.context.bucketId)\n  const name = useSelector(ref, (state) => state.context.file?.name)\n\n  return {\n    add,\n    upload,\n    cancel,\n    destroy,\n    isUploaded,\n    isUploading,\n    isError,\n    error,\n    progress,\n    id,\n    bucketId,\n    name\n  }\n}\n\n/**\n * Use the composable `useFileUpload` to upload a file.\n *\n * @example\n * ```ts\n * const {  add,\n *  upload,\n *  cancel,\n *  isUploaded,\n *  isUploading,\n *  isError,\n *  progress,\n *  id,\n *  bucketId,\n *  name\n * } = useFileUpload();\n *\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await upload({ file })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-file-upload\n */\nexport const useFileUpload = (): FileUploadComposableResult => {\n  const service = useInterpret(createFileUploadMachine)\n\n  return useFileUploadItem(service)\n}\n","import { JWTHasuraClaims } from '@nhost/nhost-js'\nimport { computed, ComputedRef } from 'vue'\n\nimport { useDecodedAccessToken } from './useDecodedAccessToken'\n\n/**\n * Use the composable `useHasuraClaims` to get the Hasura claims of the user.\n *\n * @example\n * ```tsx\n * const hasuraClaims = useHasuraClaims()\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-hasura-claims\n */\nexport const useHasuraClaims = (): ComputedRef<JWTHasuraClaims | null> => {\n  const claims = useDecodedAccessToken()\n  return computed(() => claims.value?.['https://hasura.io/jwt/claims'] || null)\n}\n","import { computed, ComputedRef, unref } from 'vue'\n\nimport { RefOrValue } from './helpers'\nimport { useHasuraClaims } from './useHasuraClaims'\n\n/**\n * Use the composable `useHasuraClaim` to get the value of a specific Hasura claim of the user.\n *\n * @example\n * ```tsx\n * // if `x-hasura-company-id` exists as a custom claim\n * const companyId = useHasuraClaim('company-id')\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-hasura-claim\n */\nexport const useHasuraClaim = (name: RefOrValue<string>): ComputedRef<string | string[] | null> => {\n  const hasuraClaims = useHasuraClaims()\n  return computed(() => {\n    const unrefName = unref(name)\n    return (\n      hasuraClaims.value?.[\n        unrefName.startsWith('x-hasura-') ? unrefName : `x-hasura-${unrefName}`\n      ] || null\n    )\n  })\n}\n","import {\n  createMultipleFilesUploadMachine,\n  FileItemRef,\n  MultipleFilesHandlerResult,\n  MultipleFilesUploadState,\n  UploadMultipleFilesActionParams,\n  uploadMultipleFilesPromise\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { Ref, ref, ToRefs } from 'vue'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface MultipleFilesUploadComposableResult extends ToRefs<MultipleFilesUploadState> {\n  /**\n   * Add one or multiple files to add to the list of files to upload.\n   */\n  add: (\n    params: Required<Pick<UploadMultipleFilesActionParams, 'files'>> &\n      UploadMultipleFilesActionParams\n  ) => void\n  /**\n   * Upload the files that has been previously added to the list.\n   */\n  upload: (params?: UploadMultipleFilesActionParams) => Promise<MultipleFilesHandlerResult>\n  /**\n   * Cancel the ongoing upload. The files that have been successfully uploaded will not be deleted from the server.\n   */\n  cancel: () => void\n  /**\n   * Clear the list of files.\n   */\n  clear: () => void\n}\n\n/**\n * Use the composable `useMultipleFilesUpload` to upload multiple files.\n *\n * @example\n * ```ts\n * const {\n *   add,\n *   upload\n * } = useMultipleFilesUpload()\n *\n * const addFiles = async (files) => {\n *   add({files})\n * }\n *\n * const handleSubmit = async (e) => {\n *   e.preventDefault()\n *   await upload()\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-multiple-files-upload\n */\nexport const useMultipleFilesUpload = (): MultipleFilesUploadComposableResult => {\n  const { nhost } = useNhostClient()\n  const errors: Ref<FileItemRef[]> = ref([])\n\n  const service = useInterpret(createMultipleFilesUploadMachine, {}, (state) => {\n    if (state.event.type === 'UPLOAD_ERROR') {\n      errors.value = state.context.files.filter((ref) => ref.getSnapshot()?.context.error)\n    } else if (\n      (state.matches('uploaded') || state.event.type === 'CLEAR') &&\n      errors.value.length > 0\n    ) {\n      errors.value = []\n    }\n  })\n\n  const add = (\n    params: Required<Pick<UploadMultipleFilesActionParams, 'files'>> &\n      UploadMultipleFilesActionParams\n  ) => {\n    service.send({ type: 'ADD', ...params })\n  }\n\n  const upload = (params?: UploadMultipleFilesActionParams) =>\n    uploadMultipleFilesPromise(\n      {\n        url: nhost.storage.url,\n        accessToken: nhost.auth.getAccessToken(),\n        adminSecret: nhost.adminSecret,\n        ...params\n      },\n      service\n    )\n\n  const cancel = () => {\n    service.send('CANCEL')\n  }\n\n  const clear = () => {\n    service.send('CLEAR')\n  }\n\n  const isUploading = useSelector(service, (state) => state.matches('uploading'))\n  const isUploaded = useSelector(service, (state) => state.matches('uploaded'))\n  const isError = useSelector(service, (state) => state.matches('error'))\n\n  const progress = useSelector(service, (state) => state.context.progress)\n  const files = useSelector(service, (state) => state.context.files)\n\n  return {\n    upload,\n    add,\n    clear,\n    cancel,\n    progress,\n    isUploaded,\n    isUploading,\n    files,\n    isError,\n    errors\n  }\n}\n","import {\n  encodeQueryParameters,\n  Provider,\n  ProviderOptions,\n  rewriteRedirectTo\n} from '@nhost/nhost-js'\nimport { reactive } from 'vue'\nimport { NestedRefOfValue, nestedUnref } from './helpers'\nimport { useAccessToken } from './useAccessToken'\nimport { useNhostClient } from './useNhostClient'\n\n/**\n *  Use the composable `useProviderLink` to get an OAuth provider URL that can be used to sign in users.\n *\n * @example\n * ```js\n * const providerLink = useProviderLink();\n * ```\n *\n * @example\n *\n *  Pass in the `connect` option to connect the user's account to the OAuth provider when different emails are used.\n *\n * ```js\n * const providerLink = useProviderLink({ connect: true });\n * ```\n *\n * @example\n * ```jsx\n * import { useProviderLink } from '@nhost/vue';\n *\n * const Component = () => {\n *   const { facebook, github } = useProviderLink();\n *\n *   return (\n *     <div>\n *       <a href={facebook}>Sign in with Facebook</a>\n *       <a href={github}>Sign in with GitHub</a>\n *     </div>\n *   );\n * };\n * ```\n */\nexport const useProviderLink = (\n  options?: NestedRefOfValue<ProviderOptions | undefined>\n): Record<Provider, string> => {\n  const { nhost } = useNhostClient()\n  const accessToken = useAccessToken()\n\n  return reactive(\n    new Proxy({} as Record<Provider, string>, {\n      get(_, provider: string) {\n        const optionsValue = nestedUnref(options)\n\n        const connectOptions = optionsValue?.connect ? { connect: accessToken.value } : {}\n\n        return encodeQueryParameters(\n          `${nhost.auth.client.backendUrl}/signin/provider/${provider}`,\n          rewriteRedirectTo(nhost.auth.client.clientUrl, {\n            ...optionsValue,\n            ...connectOptions\n          } as any)\n        )\n      }\n    })\n  )\n}\n","import {\n  createResetPasswordMachine,\n  ResetPasswordHandlerResult,\n  ResetPasswordOptions,\n  resetPasswordPromise,\n  ResetPasswordState\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useNhostClient } from './useNhostClient'\n\ninterface ResetPasswordResult extends ToRefs<ResetPasswordState> {\n  resetPassword: (email: RefOrValue<string>) => Promise<ResetPasswordHandlerResult>\n}\n\n/**\n * Use the composable `useResetPassword` to reset the password for a user. This will send a reset password link in an email to the user. When the user clicks on the reset-password link the user is automatically signed in and can change their password using the composable `useChangePassword`.\n *\n * @example\n * ```tsx\n * const { resetPassword, isLoading, isSent, isError, error } = useResetPassword({\n *   redirectTo: 'http://localhost:3000/settings/change-password'\n * });\n *\n * watchEffect(() => {\n *   console.log(isLoading.value, isSent.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await resetPassword('joe@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-reset-password\n */\nexport const useResetPassword = (\n  options?: NestedRefOfValue<ResetPasswordOptions | undefined>\n): ResetPasswordResult => {\n  const { nhost } = useNhostClient()\n  const service = useInterpret(createResetPasswordMachine(nhost.auth.client))\n\n  const isLoading = useSelector(service, (state) => state.matches('requesting'))\n  const isSent = useSelector(service, (state) => state.matches({ idle: 'success' }))\n  const isError = useSelector(service, (state) => state.matches({ idle: 'error' }))\n  const error = useSelector(service, (state) => state.context.error)\n\n  const resetPassword = (email: RefOrValue<string>) =>\n    resetPasswordPromise(service, unref(email), nestedUnref(options))\n\n  return { resetPassword, isLoading, isError, isSent, error }\n}\n","import {\n  createSendVerificationEmailMachine,\n  SendVerificationEmailHandlerResult,\n  SendVerificationEmailOptions,\n  sendVerificationEmailPromise,\n  SendVerificationEmailState\n} from '@nhost/nhost-js'\nimport { useInterpret, useSelector } from '@xstate/vue'\nimport { reactive, ToRefs, toRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useNhostClient } from './useNhostClient'\n\ninterface SendVerificationEmailResult extends ToRefs<SendVerificationEmailState> {\n  /** Resend the verification email. Returns a promise with the current context */\n  sendEmail(email: RefOrValue<string>): Promise<SendVerificationEmailHandlerResult>\n}\n\n/**\n * Use the composable `useSendVerificationEmail` to send a verification email. The verification email is sent to the user's email address and includes a link to verify the email address.\n *\n * @example\n * ```tsx\n * const { sendEmail, isLoading, isSent, isError, error } =\n  useSendVerificationEmail();\n *\n * watchEffect(() => {\n *   console.log(isLoading.value, isSent.value, isError.value, error.value);\n * })\n * \n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await sendEmail({\n *     email: 'joe@example.com',\n *   })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-send-verification-email\n */\nexport const useSendVerificationEmail = (\n  options?: NestedRefOfValue<SendVerificationEmailOptions | undefined>\n): SendVerificationEmailResult => {\n  const { nhost } = useNhostClient()\n  const service = useInterpret(createSendVerificationEmailMachine(nhost.auth.client))\n  const isLoading = useSelector(service, (state) => state.matches('requesting'))\n\n  const result = reactive<SendVerificationEmailHandlerResult>({\n    isError: false,\n    error: null,\n    isSent: false\n  })\n\n  const sendEmail = (email: RefOrValue<string>) =>\n    sendVerificationEmailPromise(service, unref(email), nestedUnref(options))\n\n  return { sendEmail, isLoading, ...toRefs(result) }\n}\n","import { AuthErrorPayload, StateErrorTypes } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/** @internal */\nexport const useError = (type: StateErrorTypes): Ref<AuthErrorPayload | null> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.errors[type] || null,\n    (a, b) => a?.error === b?.error\n  )\n}\n","import { signInAnonymousPromise } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { useAuthenticated } from './useAuthenticated'\nimport { useAuthInterpreter } from './useAuthInterpreter'\nimport { useError } from './useError'\n\n/**\n * Use the composable `useSignInAnonymous` to sign in a user anonymously.\n *\n * As a result, the user will have the `anonymous` role and subsequent set of permissions.\n * The user can then be converted to a regular user at a later stage using email+password sign-up, passwordless email (magic link), or passwordless SMS.\n *\n * @example\n * ```tsx\n * const { signInAnonymous, isLoading, isSuccess, isError, error } = useSignInAnonymous()\n *\n * watchEffect(() => {\n *   console.log(isLoading.value, isSuccess.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInAnonymous();\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-anonymous\n */\nexport const useSignInAnonymous = () => {\n  const service = useAuthInterpreter()\n  const signInAnonymous = () => signInAnonymousPromise(service.value)\n\n  const error = useError('authentication')\n\n  const isLoading = useSelector(service.value, (state) =>\n    state.matches({ authentication: { authenticating: 'anonymous' } })\n  )\n\n  const isSuccess = useAuthenticated()\n\n  const isError = useSelector(service.value, (state) =>\n    state.matches({ authentication: { signedOut: 'failed' } })\n  )\n\n  return { signInAnonymous, isLoading, isSuccess, isError, error }\n}\n","import {\n  SignInEmailPasswordHandlerResult,\n  signInEmailPasswordPromise,\n  SignInEmailPasswordState,\n  SignInMfaTotpHandlerResult,\n  signInMfaTotpPromise\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useAuthenticated } from './useAuthenticated'\nimport { useAuthInterpreter } from './useAuthInterpreter'\nimport { useError } from './useError'\n\ninterface SignInEmailPasswordResult extends ToRefs<SignInEmailPasswordState> {\n  signInEmailPassword(\n    email: RefOrValue<string>,\n    password: RefOrValue<string>\n  ): Promise<SignInEmailPasswordHandlerResult>\n  sendMfaOtp(otp: RefOrValue<string>): Promise<SignInMfaTotpHandlerResult>\n}\n\n// TODO: Add MFA example once MFA is available at Nhost Cloud.\n/**\n * Use the composable `useSignInEmailPassword` to sign in a user using email and password.\n *\n * @example\n * ```tsx\n * const { signInEmailPassword, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignInEmailPassword()\n *\n * watchEffect(() => {\n *   console.log(needsEmailVerification.value, isLoading.value, isSuccess.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInEmailPassword('joe@example.com','secret-password')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-email-password\n */\nexport const useSignInEmailPassword = (): SignInEmailPasswordResult => {\n  const service = useAuthInterpreter()\n  const signInEmailPassword = (email: RefOrValue<string>, password: RefOrValue<string>) =>\n    signInEmailPasswordPromise(service.value, unref(email), unref(password))\n\n  const sendMfaOtp = (otp: RefOrValue<string>) => signInMfaTotpPromise(service.value, unref(otp))\n\n  const user = useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n\n  const accessToken = useSelector(service.value, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  const error = useError('authentication')\n\n  const isSuccess = useAuthenticated()\n\n  const isLoading = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { authenticating: 'password' } }),\n    (a, b) => a === b\n  )\n\n  const needsEmailVerification = useSelector(\n    service.value,\n    (state) =>\n      state.matches({\n        authentication: { signedOut: 'noErrors' },\n        registration: { incomplete: 'needsEmailVerification' }\n      }),\n    (a, b) => a === b\n  )\n\n  const mfa = useSelector(service.value, (state) => state.context.mfa)\n  const needsMfaOtp = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { signedOut: 'needsMfa' } }),\n    (a, b) => a === b\n  )\n\n  const isError = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    needsMfaOtp,\n    mfa,\n    sendMfaOtp,\n    signInEmailPassword,\n    user\n  }\n}\n","import {\n  PasswordlessOptions,\n  SignInEmailPasswordlessHandlerResult,\n  signInEmailPasswordlessPromise,\n  SignInEmailPasswordlessState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\nimport { useError } from './useError'\n\ninterface SignInEmailPasswordlessResult extends ToRefs<SignInEmailPasswordlessState> {\n  /** Sends a magic link to the given email */\n  signInEmailPasswordless(email: RefOrValue<string>): Promise<SignInEmailPasswordlessHandlerResult>\n}\n\n/**\n * Use the composable `useSignInEmailPasswordless` to sign in a user using passwordless email (Magic Link).\n *\n * @example\n * ```tsx\n * const { signInEmailPasswordless, isLoading, isSuccess, isError, error } = useSignInEmailPasswordless()\n *\n * watchEffect(() => {\n *   console.log(isLoading.value, isSuccess.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInEmailPasswordless('joe@example.com');\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-email-passwordless\n */\nexport const useSignInEmailPasswordless = (\n  options?: NestedRefOfValue<PasswordlessOptions | undefined>\n): SignInEmailPasswordlessResult => {\n  const service = useAuthInterpreter()\n  const signInEmailPasswordless = (email: RefOrValue<string>) =>\n    signInEmailPasswordlessPromise(service.value, unref(email), nestedUnref(options))\n\n  const error = useError('registration')\n\n  const isLoading = useSelector(service.value, (state) =>\n    state.matches('registration.passwordlessEmail')\n  )\n\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.needsEmailVerification')\n  )\n\n  const isError = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.failed')\n  )\n\n  return { signInEmailPasswordless, isLoading, isSuccess, isError, error }\n}\n","import { SignInPATHandlerResult, SignInPATState, signInPATPromise } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInPATResult extends ToRefs<SignInPATState> {\n  signInPAT(pat: RefOrValue<string>): Promise<SignInPATHandlerResult>\n}\n\n/**\n * Use the composable `useSignInPAT` to sign in a user using a personal access token.\n *\n * @example\n * ```tsx\n * const { signInPAT, isLoading, isSuccess, isError, error } = useSignInPAT()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInPAT('8c5402d1-b05d-4825-a3ae-52d26402b89b')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-pat\n */\nexport const useSignInPAT = (): SignInPATResult => {\n  const service = useAuthInterpreter()\n  const signInPAT = (pat: RefOrValue<string>) => signInPATPromise(service.value, unref(pat))\n\n  const user = useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n\n  const accessToken = useSelector(service.value, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({ authentication: 'signedIn' })\n  )\n\n  const isLoading = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { authenticating: 'password' } }),\n    (a, b) => a === b\n  )\n\n  const isError = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    signInPAT,\n    user\n  }\n}\n","import {\n  PasswordlessOptions,\n  SignInSmsPasswordlessHandlerResult,\n  SignInSmsPasswordlessOtpHandlerResult,\n  signInSmsPasswordlessOtpPromise,\n  signInSmsPasswordlessPromise,\n  SignInSmsPasswordlessState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ref, ToRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\nexport interface SignInSmsPasswordlessHandler {\n  (\n    phoneNumber: RefOrValue<string>,\n    options?: NestedRefOfValue<PasswordlessOptions | undefined>\n  ): Promise<SignInSmsPasswordlessHandlerResult>\n}\n\nexport interface SignInSmsPasswordlessOtpHandler {\n  (code: RefOrValue<string>): Promise<SignInSmsPasswordlessOtpHandlerResult>\n  (\n    phoneNumber: RefOrValue<string>,\n    code: RefOrValue<string>\n  ): Promise<SignInSmsPasswordlessOtpHandlerResult>\n}\n\nexport interface SignInSmsPasswordlessComposableResult extends ToRefs<SignInSmsPasswordlessState> {\n  /** Sends a one-time code to the given phoneNumber */\n  signInSmsPasswordless: SignInSmsPasswordlessHandler\n  sendOtp: SignInSmsPasswordlessOtpHandler\n}\n\n/**\n * Use the composable `useSignInSmsPasswordless` to sign in a user with a one-time password sent via SMS to a phone.\n *\n * 1. The `signInSmsPasswordless` action sends a one-time password to the given phone number.\n * 2. The client is then awaiting the OTP. `needsOtp` equals true.\n * 3. After the code is received by SMS, the client sends the code with `sendOtp`. On success, the client is authenticated, and `isSuccess` equals `true`.\n *\n * Any error is monitored through `isError` and `error`. While the `signInSmsPasswordless` and `sendOtp` actions are running, `isLoading` equals `true`.\n *\n * @example\n * ```tsx\n * const { signInSmsPasswordless, sendOtp, needsOtp, isLoading, isSuccess, isError, error } = useSignInSmsPasswordless()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const askCode = async (e) => {\n *   e.preventDefault();\n *   await signInSmsPasswordless('+32455555555');\n * }\n *\n * const sendCode = async (e) => {\n *   e.preventDefault();\n *   await sendOtp('123456');\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-sms-passwordless\n */\nexport function useSignInSmsPasswordless(\n  stateOptions?: NestedRefOfValue<PasswordlessOptions | undefined>\n): SignInSmsPasswordlessComposableResult {\n  const service = useAuthInterpreter()\n  const _phoneNumber = ref('')\n\n  const signInSmsPasswordless: SignInSmsPasswordlessHandler = (\n    phoneNumber: RefOrValue<string>,\n    valueOptions = stateOptions\n  ) => {\n    _phoneNumber.value = unref(phoneNumber)\n    return signInSmsPasswordlessPromise(\n      service.value,\n      unref(phoneNumber),\n      nestedUnref(valueOptions)\n    )\n  }\n\n  const sendOtp: SignInSmsPasswordlessOtpHandler = async (...args: Array<RefOrValue<string>>) => {\n    if (args.length === 2) {\n      const [phoneNumber, code] = args\n      return signInSmsPasswordlessOtpPromise(service.value, unref(phoneNumber), unref(code))\n    }\n    const [code] = args\n    return signInSmsPasswordlessOtpPromise(service.value, unref(_phoneNumber), unref(code))\n  }\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isLoading = useSelector(\n    service.value,\n    (state) =>\n      state.matches('registration.passwordlessSms') ||\n      state.matches('registration.passwordlessSmsOtp')\n  )\n\n  const isSuccess = useSelector(service.value, (state) => state.matches('authentication.signedIn'))\n\n  const needsOtp = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.needsOtp')\n  )\n\n  const isError = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.failed')\n  )\n\n  return { signInSmsPasswordless, sendOtp, isLoading, isSuccess, needsOtp, isError, error }\n}\n","import { signOutPromise } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\nimport { useError } from './useError'\n\n/**\n * Use the composable `useSignOut` to sign out the user.\n *\n * @example\n * ```jsx\n * import { useSignOut } from '@nhost/vue'\n *\n * const { signOut, isSuccess } = useSignOut()\n *\n * const handleSignOut = async (e) => {\n *   e.preventDefault()\n *   await signOut()\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-out\n */\nexport const useSignOut = () => {\n  const service = useAuthInterpreter()\n  const signOut = (\n    /** Sign out on all devices */\n    all?: RefOrValue<boolean | undefined>\n  ) => signOutPromise(service.value, typeof unref(all) === 'boolean' ? unref(all) : false)\n\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({ authentication: { signedOut: 'success' } })\n  )\n\n  const error = useError('signout')\n\n  return { signOut, isSuccess, error }\n}\n","import { User } from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserData` to get the user data of the user.\n *\n * @example\n * ```tsx\n * const userData = useUserData();\n * ```\n * \n   * @example Example of user data\n```json\n{\n  \"avatarUrl\": \"https://s.gravatar.com/avatar\",\n  \"createdAt\": \"2022-04-11T16:33:14.780439+00:00\",\n  \"defaultRole\": \"user\",\n  \"displayName\": \"John Doe\",\n  \"email\": \"john@nhost.io\",\n  \"id\": \"05e054c7-a722-42e7-90a6-3f77a2f118c8\",\n  \"isAnonymous\": false,\n  \"locale\": \"en\",\n  \"metadata\": {\n    \"lastName\": \"Doe\",\n    \"firstName\": \"John\"\n  },\n  \"roles\": [\"user\", \"me\"]\n}\n```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-data\n */\nexport const useUserData = (): Ref<User | null> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => JSON.stringify(a) === JSON.stringify(b)\n  )\n}\n","import {\n  SignUpEmailPasswordHandlerResult,\n  signUpEmailPasswordPromise,\n  SignUpEmailPasswordState,\n  SignUpOptions\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useAccessToken } from './useAccessToken'\nimport { useAuthInterpreter } from './useAuthInterpreter'\nimport { useError } from './useError'\nimport { useUserData } from './useUserData'\n\ninterface SignUpEmailPasswordResult extends ToRefs<SignUpEmailPasswordState> {\n  /** Used for a new user to sign up. Returns a promise with the current context */\n  signUpEmailPassword(\n    email: RefOrValue<string>,\n    password: RefOrValue<string>,\n    options?: NestedRefOfValue<SignUpOptions | undefined>\n  ): Promise<SignUpEmailPasswordHandlerResult>\n}\n\n/**\n * Use the composable `useSignUpEmailPassword` to sign up a user using email and password.\n *\n * @example\n * ```tsx\n * const { signUpEmailPassword, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignUpEmailPassword()\n *\n * watchEffect(() => {\n *   console.log(needsEmailVerification.value, isLoading.value, isSuccess.value, isError.value, error.value);\n * })\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signUpEmailPassword('joe@example.com','secret-password')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-up-email-password\n */\nexport const useSignUpEmailPassword = (\n  options?: NestedRefOfValue<SignUpOptions | undefined>\n): SignUpEmailPasswordResult => {\n  const service = useAuthInterpreter()\n  const isError = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.failed')\n  )\n\n  const error = useError('registration')\n\n  const isLoading = useSelector(service.value, (state) =>\n    state.matches('registration.emailPassword')\n  )\n\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({\n      authentication: 'signedIn',\n      registration: 'complete'\n    })\n  )\n\n  const needsEmailVerification = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.needsEmailVerification')\n  )\n\n  const accessToken = useAccessToken()\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  const user = useUserData()\n  const signUpEmailPassword = (\n    email: RefOrValue<string>,\n    password: RefOrValue<string>,\n    handlerOptions: NestedRefOfValue<SignUpOptions | undefined>\n  ) =>\n    signUpEmailPasswordPromise(service.value, unref(email), unref(password), {\n      ...nestedUnref(options),\n      ...nestedUnref(handlerOptions)\n    })\n\n  return {\n    signUpEmailPassword,\n    isLoading,\n    isSuccess,\n    isError,\n    error,\n    needsEmailVerification,\n    accessToken,\n    refreshToken,\n    user\n  }\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserAvatarUrl` to get the avatar URL of the user.\n *\n * @example\n * ```tsx\n * const userAvatarUrl = useUserAvatarUrl();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-avatar-url\n */\nexport const useUserAvatarUrl = (): Ref<string | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.avatarUrl,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserDefaultRole` to get the default role of the user.\n *\n * @example\n * ```tsx\n * const userDefaultRole = useUserDefaultRole();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-default-role\n */\nexport const useUserDefaultRole = (): Ref<string | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.defaultRole,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserDisplayName` to get the display name of the user.\n *\n * @example\n * ```tsx\n * const userDisplayName = useUserDisplayName();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-display-name\n */\nexport const useUserDisplayName = (): Ref<string | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.displayName,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composbale `useUserEmail` to get the email of the user.\n *\n * @example\n * ```tsx\n * const userEmail = useUserEmail();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-email\n */\nexport const useUserEmail = (): Ref<string | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.email,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserId` to get the id of the user.\n *\n * @example\n * ```tsx\n * const userId = useUserId();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-id\n */\nexport const useUserId = (): Ref<string | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.id,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserIsAnonymous` to see if the user is anonymous or not.\n *\n * @example\n * ```tsx\n * const userIsAnonymous = useUserIsAnonymous();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-is-anonymous\n */\nexport const useUserIsAnonymous = (): Ref<boolean | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.isAnonymous,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserLocale` to get the locale of the user.\n *\n * @example\n * ```tsx\n * const userLocale = useUserLocale();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-locale\n */\nexport const useUserLocale = (): Ref<string | undefined> => {\n  const service = useAuthInterpreter()\n  return useSelector(\n    service.value,\n    (state) => state.context.user?.locale,\n    (a, b) => a === b\n  )\n}\n","import { useSelector } from '@xstate/vue'\nimport { Ref } from 'vue'\n\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\n/**\n * Use the composable `useUserRoles` to get all allowed roles of the user.\n *\n * @example\n * ```tsx\n * const userRoles = useUserRoles();\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-user-roles\n */\nexport const useUserRoles = (): Ref<string[]> => {\n  const service = useAuthInterpreter()\n  return useSelector(service.value, (state) => {\n    if (!state.matches('authentication.signedIn')) {\n      return []\n    }\n    return state.context.user?.roles || []\n  })\n}\n","import {\n  elevateEmailSecurityKeyPromise,\n  ElevateWithSecurityKeyHandlerResult\n} from '@nhost/nhost-js'\nimport { computed, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useHasuraClaims } from './useHasuraClaims'\nimport { useNhostClient } from './useNhostClient'\nimport { useUserData } from './useUserData'\n\ninterface ElevateWithSecurityKeyHandler {\n  (email: RefOrValue<string>): Promise<ElevateWithSecurityKeyHandlerResult>\n}\n\ninterface ElevateWithSecurityKeyResult {\n  elevateEmailSecurityKey: ElevateWithSecurityKeyHandler\n  elevated: RefOrValue<boolean>\n}\n\n/**\n * Use the composable `useElevateSecurityKeyEmail` to elevate the user auth permission in order to perform sensitive operations\n *\n * @example\n * ```ts\n * const { elevateEmailSecurityKey, elevated } = useElevateSecurityKeyEmail()\n *\n * watchEffect(() => {\n *   console.log(elevated);\n * })\n *\n * await elevateEmailSecurityKey('joe@example.com')\n *\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-email-password\n */\nexport const useElevateSecurityKeyEmail = (): ElevateWithSecurityKeyResult => {\n  const user = useUserData()\n  const claims = useHasuraClaims()\n  const { nhost } = useNhostClient()\n\n  const hasElevatedClaim = computed(() =>\n    user.value ? claims.value?.['x-hasura-auth-elevated'] === user.value?.id : false\n  )\n\n  const elevated = computed(() => !!hasElevatedClaim.value)\n\n  const elevateEmailSecurityKey: ElevateWithSecurityKeyHandler = (email: RefOrValue<string>) =>\n    elevateEmailSecurityKeyPromise(nhost.auth.client, unref(email))\n\n  return {\n    elevateEmailSecurityKey,\n    elevated\n  }\n}\n","import {\n  signUpEmailSecurityKeyPromise,\n  SignUpSecurityKeyOptions,\n  SignUpSecurityKeyState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ntype SignUpSecurityKeyHandlerResult = Omit<SignUpSecurityKeyState, 'isLoading'>\n\ninterface SignUpSecurityKeyHandler {\n  (\n    email: RefOrValue<string>,\n    options?: RefOrValue<SignUpSecurityKeyOptions>\n  ): Promise<SignUpSecurityKeyHandlerResult>\n}\n\nexport interface SignUpSecurityKeyHookResult extends ToRefs<SignUpSecurityKeyState> {\n  /** Used for a new user to sign up with a security key. Returns a promise with the current context */\n  signUpEmailSecurityKey: SignUpSecurityKeyHandler\n}\n\ninterface SignUpSecurityKeyResult {\n  (options?: SignUpSecurityKeyOptions): SignUpSecurityKeyHookResult\n}\n\n/**\n * Use the composable `useSignUpEmailSecurityKey` to sign up a user with security key and an email using the WebAuthn API.\n *\n * @example\n * ```ts\n * const { signUpEmailSecurityKey, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignUpEmailSecurityKey()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signUpEmailSecurityKey('joe@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-up-security-key\n */\nexport const useSignUpEmailSecurityKey: SignUpSecurityKeyResult = (\n  hookOptions?: SignUpSecurityKeyOptions\n) => {\n  const service = useAuthInterpreter()\n  const isError = useSelector(service.value, (state) => !!state.context.errors.registration)\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isLoading = useSelector(service.value, (state) => state.matches('registration.securityKey'))\n\n  const needsEmailVerification = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.needsEmailVerification')\n  )\n\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({\n      authentication: 'signedIn',\n      registration: 'complete'\n    })\n  )\n\n  const signUpEmailSecurityKey: SignUpSecurityKeyHandler = (email, options = hookOptions) =>\n    signUpEmailSecurityKeyPromise(service.value, unref(email), unref(options))\n\n  const user = useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service.value, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signUpEmailSecurityKey,\n    user\n  }\n}\n","import {\n  signInEmailSecurityKeyPromise,\n  SignInSecurityKeyPasswordlessHandlerResult,\n  SignInSecurityKeyPasswordlessState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInSecurityKeyPasswordlessHandler {\n  (email: RefOrValue<string>): Promise<SignInSecurityKeyPasswordlessHandlerResult>\n}\n\nexport interface SignInSecurityKeyPasswordlessHookResult\n  extends ToRefs<SignInSecurityKeyPasswordlessState> {\n  signInEmailSecurityKey: SignInSecurityKeyPasswordlessHandler\n}\n\ninterface SignInSecurityKeyPasswordlessResult {\n  (): SignInSecurityKeyPasswordlessHookResult\n}\n\n/**\n * Use the composable `useSignInEmailSecurityKey` to sign in a user using their email and a security key using the WebAuthn API.\n *\n * @example\n * ```tsx\n * const { signInEmailSecurityKey, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignInEmailSecurityKey()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInEmailSecurityKey('joe@example.com')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-web-authn\n */\nexport const useSignInEmailSecurityKey: SignInSecurityKeyPasswordlessResult = () => {\n  const service = useAuthInterpreter()\n  const signInEmailSecurityKey: SignInSecurityKeyPasswordlessHandler = (\n    email: RefOrValue<string>\n  ) => signInEmailSecurityKeyPromise(service.value, unref(email))\n\n  const user = useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service.value, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({\n      authentication: 'signedIn'\n    })\n  )\n  const isLoading = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { authenticating: 'securityKeyEmail' } }),\n    (a, b) => a === b\n  )\n\n  const needsEmailVerification = useSelector(\n    service.value,\n    (state) =>\n      state.matches({\n        authentication: { signedOut: 'noErrors' },\n        registration: { incomplete: 'needsEmailVerification' }\n      }),\n    (a, b) => a === b\n  )\n  const isError = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signInEmailSecurityKey,\n    user\n  }\n}\n","import {\n  ActionErrorState,\n  ActionLoadingState,\n  ActionSuccessState,\n  AddSecurityKeyHandlerResult,\n  addSecurityKeyPromise,\n  ErrorPayload\n} from '@nhost/nhost-js'\nimport { ToRefs, ref, computed } from 'vue'\nimport { useNhostClient } from './useNhostClient'\n\ninterface AddSecurityKeyHandler {\n  (\n    /** Optional human-readable name of the security key */\n    nickname?: string\n  ): Promise<AddSecurityKeyHandlerResult>\n}\n\nexport interface AddSecuritKeyComposableResult\n  extends ToRefs<ActionErrorState>,\n    ToRefs<ActionSuccessState>,\n    ToRefs<ActionLoadingState> {\n  /** Add a security key to the current user with the WebAuthn API */\n  add: AddSecurityKeyHandler\n}\n\n/**\n * Use the composable `useAddSecurityKey` to add a WebAuthn security key.\n *\n * @example\n * ```tsx\n * const { add, isLoading, isSuccess, isError, error } = useAddSecurityKey()\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await add('key nickname')\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-add-security-key\n */\nexport const useAddSecurityKey = (): AddSecuritKeyComposableResult => {\n  const { nhost } = useNhostClient()\n  const error = ref<ErrorPayload | null>(null)\n  const isSuccess = computed(() => !error)\n  const isError = computed(() => !!error)\n  const isLoading = ref<boolean>(false)\n\n  const add: AddSecurityKeyHandler = async (nickname) => {\n    isLoading.value = true\n\n    const result = await addSecurityKeyPromise(nhost.auth.client, nickname)\n\n    const { error: addSecurityKeyError } = result\n\n    if (error) {\n      error.value = addSecurityKeyError\n    }\n\n    isLoading.value = false\n\n    return result\n  }\n\n  return { add, isLoading, isSuccess, isError, error }\n}\n","import {\n  EmailOTPOptions,\n  SignInEmailOTPHandlerResult,\n  signInEmailOTPPromise,\n  SignInEmailOTPState,\n  VerifyEmailOTPHandlerResult,\n  verifyEmailOTPPromise\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs, unref } from 'vue'\nimport { NestedRefOfValue, nestedUnref, RefOrValue } from './helpers'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\nexport interface SignInEmailOTPHandler {\n  (\n    email: RefOrValue<string>,\n    options?: NestedRefOfValue<EmailOTPOptions | undefined>\n  ): Promise<SignInEmailOTPHandlerResult>\n}\n\nexport interface VerifyEmailOTPHandler {\n  (email: RefOrValue<string>, code: RefOrValue<string>): Promise<VerifyEmailOTPHandlerResult>\n}\n\nexport interface SignEmailOTPComposableResult extends ToRefs<SignInEmailOTPState> {\n  signInEmailOTP: SignInEmailOTPHandler\n  verifyEmailOTP: VerifyEmailOTPHandler\n}\n\n/**\n * Use the `useSignInEmailOTP` composable to sign in a user with a one-time password sent via email.\n *\n * ## Usage\n *\n * 1. Call the `signInEmailOTP` function with the user's email to send a one-time password (OTP) to that email address.\n * 2. The state `needsOtp` will be `true`, indicating that an OTP is required.\n * 3. Once the user receives the OTP via email, call the `verifyEmailOTP` function with the email and the received OTP.\n * 4. On successful verification, the user is authenticated, and `isSuccess` becomes `true`.\n *\n * Any errors during the sign-in or verification process are tracked using `isError` and `error`. While the `signInEmailOTP` and `verifyEmailOTP` actions are in progress, `isLoading` is `true`.\n *\n * ## Example\n * ```ts\n * const {\n *   signInEmailOTP,\n *   verifyEmailOTP,\n *   error\n * } = useSignInEmailOTP()\n *\n * const requestOtp = async (e: Event) => {\n *   e.preventDefault()\n *   await signInEmailOTP(email.value)\n * }\n *\n * const confirmOtp = async (e: Event) => {\n *   e.preventDefault()\n *   await verifyEmailOTP(email.value, otp.value)\n * }\n *\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-email-otp\n */\nexport function useSignInEmailOTP(\n  options?: NestedRefOfValue<EmailOTPOptions | undefined>\n): SignEmailOTPComposableResult {\n  const service = useAuthInterpreter()\n\n  const signInEmailOTP: SignInEmailOTPHandler = (\n    email: RefOrValue<string>,\n    overrideOptions = options\n  ) => {\n    return signInEmailOTPPromise(service.value, unref(email), nestedUnref(overrideOptions))\n  }\n\n  const verifyEmailOTP: VerifyEmailOTPHandler = async (\n    email: RefOrValue<string>,\n    otp: RefOrValue<string>\n  ) => {\n    return verifyEmailOTPPromise(service.value, unref(email), unref(otp))\n  }\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.registration || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isLoading = useSelector(\n    service.value,\n    (state) =>\n      state.matches('registration.signInEmailOTP') || state.matches('registration.verifyEmailOTP')\n  )\n\n  const isSuccess = useSelector(service.value, (state) => state.matches('authentication.signedIn'))\n\n  const needsOtp = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.needsOtp')\n  )\n\n  const isError = useSelector(service.value, (state) =>\n    state.matches('registration.incomplete.failed')\n  )\n\n  return { signInEmailOTP, verifyEmailOTP, needsOtp, isLoading, isSuccess, isError, error }\n}\n","import {\n  SignInIdTokenHandlerResult,\n  SignInIdTokenState,\n  signInIdTokenPromise,\n  Provider\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { RefOrValue } from './helpers'\nimport { ToRefs, unref } from 'vue'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInIdTokenResult extends ToRefs<SignInIdTokenState> {\n  signInIdToken(\n    provider: RefOrValue<Provider>,\n    idToken: RefOrValue<string>,\n    nonce?: RefOrValue<string>\n  ): Promise<SignInIdTokenHandlerResult>\n}\n\n/**\n * Use the composable `useSignInIdToken` to sign in a user using an `idToken`.\n *\n * @example\n * ```ts\n * const { signInIdToken, isLoading, isSuccess, isError, error } = useSignInIdToken()\n *\n * console.log({ isLoading, isSuccess, isError, error });\n *\n * const handleSignInIdToken = async () => {\n *   await signInIdToken({ provider: 'google', idToken: '...' })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-idtoken\n */\nexport const useSignInIdToken = (): SignInIdTokenResult => {\n  const service = useAuthInterpreter()\n\n  const signInIdToken = (\n    provider: RefOrValue<Provider>,\n    idToken: RefOrValue<string>,\n    nonce?: RefOrValue<string>\n  ) =>\n    signInIdTokenPromise(service.value, {\n      provider: unref(provider),\n      idToken: unref(idToken),\n      nonce: unref(nonce)\n    })\n\n  const user = useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n\n  const accessToken = useSelector(service.value, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({ authentication: 'signedIn' })\n  )\n\n  const isLoading = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { authenticating: 'idToken' } }),\n    (a, b) => a === b\n  )\n\n  const isError = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    signInIdToken,\n    user\n  }\n}\n","import {\n  ActionErrorState,\n  ActionLoadingState,\n  ActionSuccessState,\n  ErrorPayload,\n  LinkIdTokenHandlerParams,\n  LinkIdTokenHandlerResult,\n  linkIdTokenPromise\n} from '@nhost/nhost-js'\nimport { computed, ref, ToRefs } from 'vue'\nimport { useNhostClient } from './useNhostClient'\n\nexport interface LinkIdTokenResult\n  extends ToRefs<ActionErrorState>,\n    ToRefs<ActionSuccessState>,\n    ToRefs<ActionLoadingState> {\n  linkIdToken(params: LinkIdTokenHandlerParams): Promise<LinkIdTokenHandlerResult>\n}\n\n/**\n * Use the hook `useLinkIdToken` to link a user account with the provider's account using an id token\n *\n * @example\n * ```tsx\n * const { linkIdToken, isLoading, isSuccess, isError, error } = useLinkIdToken()\n *\n * const handleLinkIdToken = async () => {\n *   await linkIdToken({\n *      provider: 'google',\n *      idToken: '...',\n *      nonce: '...'\n *   })\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-link-id-token\n */\nexport const useLinkIdToken = (): LinkIdTokenResult => {\n  const { nhost } = useNhostClient()\n  const error = ref<ErrorPayload | null>(null)\n  const isSuccess = computed(() => !error)\n  const isError = computed(() => !!error)\n  const isLoading = ref<boolean>(false)\n\n  const linkIdToken = async ({ provider, idToken, nonce }: LinkIdTokenHandlerParams) => {\n    isLoading.value = true\n\n    const result = await linkIdTokenPromise(nhost.auth.client, {\n      provider,\n      idToken,\n      ...(nonce && { nonce })\n    })\n\n    const { error: linkIdTokenError } = result\n\n    if (error) {\n      error.value = linkIdTokenError\n    }\n\n    isLoading.value = false\n    return result\n  }\n\n  return { linkIdToken, isLoading, isSuccess, isError, error }\n}\n","import {\n  SignInSecurityKeyHandlerResult,\n  signInSecurityKeyPromise,\n  SignInSecurityKeyState\n} from '@nhost/nhost-js'\nimport { useSelector } from '@xstate/vue'\nimport { ToRefs } from 'vue'\nimport { useAuthInterpreter } from './useAuthInterpreter'\n\ninterface SignInSecurityKeyHandler {\n  (): Promise<SignInSecurityKeyHandlerResult>\n}\n\nexport interface SignInSecurityKeyHookResult extends ToRefs<SignInSecurityKeyState> {\n  signInSecurityKey: SignInSecurityKeyHandler\n}\n\ninterface SignInSecurityKeyResult {\n  (): SignInSecurityKeyHookResult\n}\n\n/**\n * Use the composable `useSignInSecurityKey` to sign in a user with a security key using the WebAuthn API\n *\n * @example\n * ```tsx\n * const { signInSecurityKey, needsEmailVerification, isLoading, isSuccess, isError, error } = useSignInSecurityKey()\n *\n * console.log({ needsEmailVerification, isLoading, isSuccess, isError, error });\n *\n * const handleFormSubmit = async (e) => {\n *   e.preventDefault();\n *\n *   await signInSecurityKey()\n * }\n * ```\n *\n * @docs https://docs.nhost.io/reference/vue/use-sign-in-security-key\n */\nexport const useSignInSecurityKey: SignInSecurityKeyResult = () => {\n  const service = useAuthInterpreter()\n  const signInSecurityKey: SignInSecurityKeyHandler = () => signInSecurityKeyPromise(service.value)\n\n  const user = useSelector(\n    service.value,\n    (state) => state.context.user,\n    (a, b) => a?.id === b?.id\n  )\n  const accessToken = useSelector(service.value, (state) => state.context.accessToken.value)\n\n  const refreshToken = useSelector(service.value, (state) => state.context.refreshToken.value)\n\n  const error = useSelector(\n    service.value,\n    (state) => state.context.errors.authentication || null,\n    (a, b) => a?.error === b?.error\n  )\n  const isSuccess = useSelector(service.value, (state) =>\n    state.matches({\n      authentication: 'signedIn'\n    })\n  )\n  const isLoading = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { authenticating: 'securityKeyEmail' } }),\n    (a, b) => a === b\n  )\n\n  const needsEmailVerification = useSelector(\n    service.value,\n    (state) =>\n      state.matches({\n        authentication: { signedOut: 'noErrors' },\n        registration: { incomplete: 'needsEmailVerification' }\n      }),\n    (a, b) => a === b\n  )\n  const isError = useSelector(\n    service.value,\n    (state) => state.matches({ authentication: { signedOut: 'failed' } }),\n    (a, b) => a === b\n  )\n\n  return {\n    accessToken,\n    refreshToken,\n    error,\n    isError,\n    isLoading,\n    isSuccess,\n    needsEmailVerification,\n    signInSecurityKey,\n    user\n  }\n}\n"],"names":["DefaultNhostClient","currentNhostClient","useNhostClient","resolveImpl","savedCurrentClient","getCurrentInstance","providedNhostClient","inject","resolveNhostClient","client","NhostClient","VanillaClient","params","_a","app","autoSignIn","router","warn","removeParameterFromWindow","useAuthInterpreter","nhost","computed","interpreter","useAccessToken","service","useSelector","state","useAuthenticated","useAuthenticationStatus","toRefs","a","b","nestedUnref","input","result","unref","value","aggr","key","useChangeEmail","options","useInterpret","createChangeEmailMachine","isLoading","error","isError","needsEmailVerification","email","changeEmailPromise","useChangePassword","createChangePasswordMachine","isSuccess","password","changePasswordPromise","useConfigMfa","createEnableMfaMachine","isGenerating","isGenerated","isActivating","isActivated","qrCodeDataUrl","generateQrCodePromise","code","activateMfaPromise","useDecodedAccessToken","jwt","jwtDecode","useFileUploadItem","ref","add","bucketId","upload","uploadFilePromise","cancel","destroy","isUploading","isUploaded","progress","id","name","useFileUpload","createFileUploadMachine","useHasuraClaims","claims","useHasuraClaim","hasuraClaims","unrefName","useMultipleFilesUpload","errors","createMultipleFilesUploadMachine","uploadMultipleFilesPromise","clear","files","useProviderLink","accessToken","reactive","_","provider","optionsValue","connectOptions","encodeQueryParameters","rewriteRedirectTo","useResetPassword","createResetPasswordMachine","isSent","resetPasswordPromise","useSendVerificationEmail","createSendVerificationEmailMachine","sendVerificationEmailPromise","useError","type","useSignInAnonymous","signInAnonymous","signInAnonymousPromise","useSignInEmailPassword","signInEmailPassword","signInEmailPasswordPromise","sendMfaOtp","otp","signInMfaTotpPromise","user","refreshToken","mfa","needsMfaOtp","useSignInEmailPasswordless","signInEmailPasswordless","signInEmailPasswordlessPromise","useSignInPAT","signInPAT","pat","signInPATPromise","useSignInSmsPasswordless","stateOptions","_phoneNumber","signInSmsPasswordless","phoneNumber","valueOptions","signInSmsPasswordlessPromise","sendOtp","args","signInSmsPasswordlessOtpPromise","needsOtp","useSignOut","signOut","all","signOutPromise","useUserData","useSignUpEmailPassword","handlerOptions","signUpEmailPasswordPromise","useUserAvatarUrl","useUserDefaultRole","useUserDisplayName","useUserEmail","useUserId","useUserIsAnonymous","useUserLocale","useUserRoles","useElevateSecurityKeyEmail","hasElevatedClaim","_b","elevated","elevateEmailSecurityKeyPromise","useSignUpEmailSecurityKey","hookOptions","signUpEmailSecurityKey","signUpEmailSecurityKeyPromise","useSignInEmailSecurityKey","signInEmailSecurityKey","signInEmailSecurityKeyPromise","useAddSecurityKey","nickname","addSecurityKeyPromise","addSecurityKeyError","useSignInEmailOTP","signInEmailOTP","overrideOptions","signInEmailOTPPromise","verifyEmailOTP","verifyEmailOTPPromise","useSignInIdToken","signInIdToken","idToken","nonce","signInIdTokenPromise","useLinkIdToken","linkIdTokenPromise","linkIdTokenError","useSignInSecurityKey","signInSecurityKey","signInSecurityKeyPromise"],"mappings":"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"}